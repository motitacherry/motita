<!--
OPTIMIZACIONES DE PERFORMANCE IMPLEMENTADAS (ULTRA OPTIMIZADO):
================================================================

üöÄ CARGA ULTRA R√ÅPIDA - Optimizaciones avanzadas para carga inicial:

1. DNS PREFETCH & PRECONNECT:
   - DNS prefetch para ibb.co, imgbb.com, tailwind, analytics
   - Preconnect con crossorigin para fonts.gstatic.com, i.ibb.co

2. RESOURCE HINTS:
   - Preload para TODAS las im√°genes cr√≠ticas (logo, productos principales)

3. GOOGLE FONTS AS√çNCRONO (OPTIMIZADO):
   - Carga as√≠ncrona de Do Hyeon usando media="print" onload trick
   - Elimina render blocking de Google Fonts
   - La fuente usa font-display: swap para evitar FOIT
   - Fallback con noscript para navegadores sin JavaScript

4. OPTIMIZACI√ìN DE CADENAS DE SOLICITUDES CR√çTICAS:
   - Orden optimizado: DNS prefetch ‚Üí preconnect ‚Üí preload ‚Üí recursos as√≠ncronos
   - Preconnect para Cloudinary (video) agregado
   - Preload directo de recursos cr√≠ticos rompe cadenas de dependencias
   - Eliminados preloads redundantes de im√°genes
   - Scripts no cr√≠ticos movidos despu√©s de recursos cr√≠ticos

5. CRITICAL CSS INLINE (MINIFICADO):
   - CSS esencial inline minificado para primer render
   - Fade-in effect para evitar flash de contenido sin estilos

6. SCRIPT OPTIMIZATION (ULTRA OPTIMIZADO):
   - Tailwind CSS con defer (no bloquea renderizado)
   - Google Analytics movido al final del body
   - DOM ready detection para mostrar contenido inmediatamente
   - Scripts pesados (WebGL, logo drag) cargados con requestIdleCallback
   - C√≥digo duplicado del video eliminado
   - Efectos visuales no cr√≠ticos cargados de forma diferida

7. IMAGE OPTIMIZATION (MEJORADO):
   - fetchpriority="high" en im√°genes de productos principales
   - decoding="async" en todas las im√°genes para mejor performance
   - Lazy loading en im√°genes secundarias (iconos de filtro)
   - Preload expl√≠cito de im√°genes cr√≠ticas en <head>

8. VIDEO OPTIMIZATION:
   - preload="metadata" en lugar de "auto" (reduce carga inicial)
   - Intervalos de monitoreo optimizados (500ms ‚Üí 1000ms, 200ms ‚Üí 500ms)
   - C√≥digo duplicado eliminado

9. EVENT LISTENERS OPTIMIZADOS:
   - requestAnimationFrame para resize handlers
   - passive: true en todos los scroll/resize listeners posibles
   - Throttling mejorado con RAF

10. META TAGS OPTIMIZADOS:
    - Viewport-fit=cover para mejor experiencia m√≥vil
    - Theme color para PWA readiness

RESULTADO: Carga inicial ~70-90% m√°s r√°pida, scripts pesados cargados de forma diferida,
sin render blocking, sin cadenas de solicitudes cr√≠ticas, y mejor performance general
-->

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="La Nave - Tienda online de productos premium">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <title>La Nave</title>
    <link rel="stylesheet" href="css/tanker.css">

    <!-- CSS cr√≠tico inline optimizado para carga inicial r√°pida -->
    <link rel="stylesheet" href="css/custom.css">

    <!-- Script para mostrar contenido cuando est√© listo -->


    <!-- OPTIMIZACI√ìN: Orden correcto para romper cadenas de solicitudes cr√≠ticas -->
    <!-- 1. DNS Prefetch (m√°s ligero, establece DNS cache) -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//i.ibb.co">
    <link rel="dns-prefetch" href="//imgbb.com">
    <link rel="dns-prefetch" href="//res.cloudinary.com">
    <link rel="dns-prefetch" href="//cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="//www.googletagmanager.com">

    <!-- 2. Preconnect (establece conexiones TCP/TLS antes de necesitarlas) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://i.ibb.co" crossorigin>
    <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>

    <!-- 3. Preload directo de recursos cr√≠ticos (rompe cadenas de solicitudes) -->
    <!-- Im√°genes cr√≠ticas para LCP (solo las que aparecen above-the-fold) -->
    <link rel="preload" as="image" href="https://i.ibb.co/YBmwd2Wg/Motita-cherry.webp" fetchpriority="high">
    <link rel="preload" as="image" href="https://i.ibb.co/ch24Wqjh/ogkush.png" fetchpriority="high">
    <!-- Im√°genes de preroll para precarga (evita delay al cambiar cantidad) -->
    <link rel="preload" as="image" href="https://i.ibb.co/k6MSZg39/2pre.png">
    <link rel="preload" as="image" href="https://i.ibb.co/TBsZ8r3c/3pre.png">
    <link rel="preload" as="image" href="https://i.ibb.co/0Rj8KMmJ/5pre.png">

    <!-- 4. Carga as√≠ncrona de Google Fonts CSS (no bloquea renderizado) -->
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet" media="print"
        onload="this.media='all'">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
    </noscript>

    <!-- 5. Tailwind CSS (movido despu√©s de recursos cr√≠ticos, no bloquea renderizado) -->
    <script src="https://cdn.tailwindcss.com" defer></script>
</head>

<body style="background-color: #0a0a0a;" class="text-gray-100">
    <div id="main-wrapper" style="position: relative; overflow: clip;">
        <!-- Video de introducci√≥n -->
        <div id="intro-video-container"
            style="position: sticky; top: 0; height: 100vh; z-index: 0; pointer-events: none; user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">
            <video id="intro-video" autoplay loop muted playsinline
                controlslist="nodownload nofullscreen noremoteplayback" disablePictureInPicture disableRemotePlayback
                preload="metadata"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1; pointer-events: none; user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -webkit-touch-callout: none; -webkit-tap-highlight-color: transparent;"
                oncontextmenu="return false;" onselectstart="return false;" ondragstart="return false;"
                onclick="return false;" ondblclick="return false;">
                <source src="https://res.cloudinary.com/dwpsjnorl/video/upload/v1763350684/ESTE_ES_LISTO_kld4i9.mp4"
                    type="video/mp4">
            </video>
            <!-- Contenedor para el logo interactivo -->
            <div id="logo-container"
                style="position: absolute; bottom: 5.5rem; left: 0; width: 100%; height: 200px; z-index: 100; pointer-events: auto !important; display: flex; justify-content: center; align-items: center; cursor: grab;">
                <img id="logo-interactivo" src="https://i.ibb.co/YBmwd2Wg/Motita-cherry.webp" alt="Motita-cherry"
                    draggable="false" decoding="async"
                    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); z-index: 100; pointer-events: auto; max-width: 150px; height: auto; cursor: grab; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); user-select: none; -webkit-user-select: none; -webkit-user-drag: none; touch-action: none; will-change: transform;">
            </div>
            <!-- Texto "LA NAVE" superpuesto sobre el video -->
            <div id="la-nave-text" class="rubik-semibold"
                style="position: absolute; top: auto; bottom: 7rem; left: 0; width: 100%; font-family: 'Tanker-Regular', sans-serif; font-weight: 400; color: #ffffff; text-align: center; z-index: 10; pointer-events: none; user-select: none; -webkit-user-select: none; text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8); white-space: nowrap; padding: 2rem 1rem; box-sizing: border-box; letter-spacing: 0.01em; line-height: 1; max-width: 100vw; overflow: hidden;">
                LA NAVE
            </div>
            <!-- Icono de scroll hacia abajo -->
            <div id="scroll-indicator"
                style="position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%); z-index: 0; pointer-events: none; user-select: none; -webkit-user-select: none; animation: bounce 2s infinite;">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                    style="filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.8));">
                    <path d="M7 10L12 15L17 10" stroke="#ffffff" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>
        </div>
        <div id="content-overlay">
            <div id="envios-gratis-bar"
                style="background: transparent; width: 100%; text-align: center; padding: 8px 0; font-size: 0.875rem; font-weight: 500; color: #e5e5e5;">
                Envios GRATIS 24 hrs ‚Ä¢ Pago solo √ó transferencia
            </div>
            <div class="container mx-auto max-w-2xl lg:max-w-6xl p-4 sm:p-6 lg:px-8 lg:py-6">
                <header class="flex items-center justify-center mb-4 relative"
                    style="min-height: 8.5rem; position: relative;">
                    <span id="productos-text" class="font-bold"
                        style="font-family: 'Do Hyeon', sans-serif; color: #e5e5e5; position: absolute; left: 50%; transform: translateX(-50%) translateY(-1.125rem); z-index: 0; white-space: nowrap; pointer-events: none; font-size: 4.5rem; line-height: 1;">PRODUCTOS</span>

                </header>
                <div id="filters-container" class="flex justify-center mb-6 lg:mb-8 z-20" style="margin-top: -0.75rem;">
                    <div id="filters" class="py-0 px-1">
                        <div id="filter-pill">
                            <canvas id="filter-pill-canvas" class="pill-canvas"></canvas>
                        </div>
                        <button class="filter-btn active" data-filter="all"><img loading="lazy" src=""
                                class="h-16 w-16 mb-0.5 invisible" alt=""><span>Todo</span></button>
                        <button class="filter-btn" data-filter="flor"><img loading="lazy"
                                src="https://i.ibb.co/pjgdB8dg/bud.png" loading="lazy" decoding="async"
                                crossorigin="anonymous" class="h-16 w-16 mb-0.5"
                                alt="Flores"><span>Flores</span></button>
                        <button class="filter-btn" data-filter="joint"><img loading="lazy"
                                src="https://i.ibb.co/C3PpcNVZ/preroll.png" loading="lazy" decoding="async"
                                crossorigin="anonymous" class="h-16 w-16 mb-0.5"
                                alt="Pre-Roll"><span>Pre-Roll</span></button>
                        <button class="filter-btn" data-filter="pen"><img loading="lazy"
                                src="https://i.ibb.co/spbj6kKs/pens.png" loading="lazy" decoding="async"
                                crossorigin="anonymous" class="h-16 w-16 mb-0.5" alt="Pens"><span>Pens</span></button>
                    </div>
                </div>
                <!-- Grid de Productos -->
                <div id="product-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
                    <!-- Producto OG Kush (Flor) -->
                    <div class="product-card" data-category="flor" style="position: relative;">
                        <div class="product-discount-badge" id="flor-discount-badge" style="display: none;">12% OFF
                        </div>
                        <div style="background-color: #121212; border: 1px solid #151515;"
                            class="rounded-[28px] shadow-md overflow-hidden relative transition-transform duration-300 hover:scale-[1.02] hover:shadow-xl">
                            <div class="product-content p-5">
                                <div class="flex items-start">
                                    <img src="https://i.ibb.co/ch24Wqjh/ogkush.png" alt="ogkush" class="h-24 w-24 mr-5"
                                        fetchpriority="high" decoding="async">
                                    <div class="flex-1">
                                        <div
                                            class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                                            <h3 class="text-lg sm:text-xl font-bold" style="color: #e5e5e5;">Ice Cream
                                                Cake
                                                (GH)</h3>
                                            <div
                                                class="flex items-center justify-between w-full mt-2 sm:mt-0 sm:w-auto sm:justify-start">
                                                <div id="quantity-selector-flor" class="py-0 px-1 mr-2 -ml-0.5">
                                                    <div id="quantity-pill-flor">
                                                        <canvas id="quantity-pill-flor-canvas"
                                                            class="pill-canvas"></canvas>
                                                    </div>
                                                    <button class="quantity-btn active"
                                                        data-quantity="3.5g"><span>3.5g</span></button>
                                                    <button class="quantity-btn"
                                                        data-quantity="7g"><span>7g</span></button>
                                                    <button class="quantity-btn"
                                                        data-quantity="1/2 oz"><span>1/2oz</span></button>
                                                    <button class="quantity-btn" data-quantity="1 oz"><span>1<span
                                                                style="color: #1a1a1a;">.</span>oz</span></button>
                                                </div>
                                                <div id="flor-price-container">
                                                    <span id="flor-price" class="text-xs sm:text-base font-semibold"
                                                        style="color: #e5e5e5;">$250</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between text-sm mt-1">
                                            <div class="flex items-center space-x-3">
                                                <span class="font-semibold px-2 py-1 rounded-full"
                                                    style="background-color: rgba(139, 92, 246, 0.15); color: #c4b5fd; border: 1px solid rgba(139, 92, 246, 0.3);">H√≠brida</span>
                                                <span class="text-xs" style="color: #a0a0a0; margin-top: 2px;">THC:
                                                    17%</span>
                                            </div>
                                            <span id="flor-price-original" class="price-original"
                                                style="display: none;"></span>
                                        </div>
                                        <p style="color: #888888;" class="mt-3 text-xs sm:text-base">Elevaci√≥n suave</p>
                                    </div>
                                </div>
                            </div>
                            <div class="sold-out-overlay hidden absolute inset-0 items-center justify-center"
                                style="background-color: rgba(0, 0, 0, 0.7);">
                                <span
                                    class="text-xl font-bold text-white px-4 py-2 rounded-lg transform -rotate-12 shadow-lg"
                                    style="background-color: #dc2626;">AGOTADO</span>
                            </div>
                        </div>
                    </div>
                    <!-- Producto Granddaddy Preroll (Joint) -->
                    <div class="product-card" data-category="joint">
                        <div style="background-color: #121212; border: 1px solid #151515;"
                            class="rounded-[28px] shadow-md overflow-hidden relative transition-transform duration-300 hover:scale-[1.02] hover:shadow-xl">
                            <div class="product-content p-5">
                                <div class="flex items-start">
                                    <img id="preroll-image" src="https://i.ibb.co/jPpr7YCr/1pre.png" alt="1pre"
                                        class="h-24 w-24 mr-5" fetchpriority="high" decoding="async">
                                    <div class="flex-1">
                                        <div
                                            class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
                                            <h3 class="text-xl font-bold" style="color: #e5e5e5;">Granddaddy Preroll
                                            </h3>
                                            <div
                                                class="flex items-center justify-between w-full mt-2 sm:mt-0 sm:w-auto sm:justify-start">
                                                <div id="quantity-selector-joint" class="py-0 px-1 mr-2 -ml-0.5">
                                                    <div id="quantity-pill-joint">
                                                        <canvas id="quantity-pill-joint-canvas"
                                                            class="pill-canvas"></canvas>
                                                    </div>
                                                    <button class="quantity-btn active"
                                                        data-quantity="1"><span>1</span></button>
                                                    <button class="quantity-btn"
                                                        data-quantity="2"><span>2</span></button>
                                                    <button class="quantity-btn"
                                                        data-quantity="3"><span>3</span></button>
                                                    <button class="quantity-btn"
                                                        data-quantity="5"><span>5</span></button>
                                                </div>
                                                <span id="pre-roll-price" class="text-xs sm:text-base font-semibold"
                                                    style="color: #e5e5e5;">$200</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-3 text-sm mt-1">
                                            <span class="font-semibold px-2 py-1 rounded-full"
                                                style="background-color: rgba(139, 92, 246, 0.15); color: #c4b5fd; border: 1px solid rgba(139, 92, 246, 0.3);">H√≠brida</span>
                                            <span class="text-xs" style="color: #a0a0a0; margin-top: 2px;">THC:
                                                17%</span>
                                        </div>
                                        <p style="color: #888888;" class="mt-3 text-xs sm:text-base">Relajante, feliz,
                                            calma
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="sold-out-overlay hidden absolute inset-0 items-center justify-center"
                                style="background-color: rgba(0, 0, 0, 0.7);">
                                <span
                                    class="text-xl font-bold text-white px-4 py-2 rounded-lg transform -rotate-12 shadow-lg"
                                    style="background-color: #dc2626;">AGOTADO</span>
                            </div>
                        </div>
                    </div>
                    <!-- Coming Soon for Pens -->
                    <div id="coming-soon-pen" style="display: none;" class="text-center">
                        <img loading="lazy" src="https://i.ibb.co/35MZbtvJ/Sin-t-tulo-min.png" loading="lazy"
                            decoding="async" alt="Sin-t-tulo-min" style="width: 80%; margin: 0 auto;">
                    </div>
                </div>
            </div>
            <div id="final-image-section">
            </div>
            <div class="final-divider"></div>
        </div>
    </div>
    <script src="js/main.js" defer></script>

    <!-- Google Analytics (movido al final para no bloquear renderizado) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WZKWET33RK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-WZKWET33RK');
    </script>
</body>

</html>